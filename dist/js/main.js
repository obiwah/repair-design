$(function(){const e=$(".modal"),a=$("[data-toggle=modal]"),o=$(".modal__close");$("[data-toggle=submit]"),$(".scroll-up");function t(){e.removeClass("animated faster fadeIn").addClass("animated faster fadeOut").removeClass("modal--visible")}a.on("click",function(){e.removeClass("animated faster fadeOut").addClass("animated faster fadeIn").addClass("modal--visible"),e.on("click",e=>{e.target.classList.contains("modal")&&t()}),$(document).on("keydown",e=>{"Escape"===e.key&&t()})}),o.on("click",t),a.each((e,a)=>{$(a).hover(()=>{$(window).width()>=992&&$(a).addClass("animated pulse")},()=>{$(window).width()>=992&&$(a).removeClass("animated pulse")})});new Swiper(".projects .swiper-container",{spaceBetween:1,loop:!0,navigation:{nextEl:".projects .swiper-button-next",prevEl:".projects .swiper-button-prev"},pagination:{el:".projects .swiper-pagination",type:"bullets"}});new WOW({mobile:!1}).init(),$(".form").each(function(e,a){$(a).validate({rules:{userName:{required:!0,rangelength:[2,15]},userPhone:{required:!0,minlength:18},userEmail:{required:!0,email:!0},"policy-checkbox":{required:!0}},messages:{userName:{required:"Заполните поле",rangelength:"От 2 до 15 букв"},userPhone:{required:"Заполните поле",minlength:"Телефон в формате: +7 (xxx) xxx-xx-xx"},userEmail:{required:"Заполните поле",email:"Email должен быть в формате name@domain.com"},"policy-checkbox":{required:"Соглашайтесь!"}},errorClass:"invalid",errorElement:"div",submitHandler:function(e){$.ajax({type:"post",url:"send.php",data:$(e).serialize(),success:function(a){return e.reset(),alert("Форма отправлена, мы свяжемся с вами через 10 минут"),$(e).hasClass("modal__form")&&t(),ym(56920936,"reachGoal","formSubmit"),!0},error:function(e,a,o){console.error(`Ошибка отправки формы. jqXHR: ${e}, textStatus: ${a}, errorThrown: ${o}`)}})}})}),$('[type="tel"]').mask("+7 (000) 000-00-00").each(function(e,a){$(a).on("focus",()=>{$(this).attr("placeholder","+7 (___) ___ __-__")})});const n=$(".control__video");function r(e){e.target.setVolume(10),e.target.playVideo()}$(".control__play").on("click",function(){new YT.Player("player",{width:n.width(),height:n.height(),videoId:"eyNNuaqvT7I",playerVars:{color:"white",iv_load_policy:3,rel:0,showinfo:0,start:179},events:{onReady:r}})}),new Blazy;let i=document.getElementById("yandex-map").getBoundingClientRect().top,l=!1;document.body.onscroll=function(){if(window.pageYOffset>i&&!l){l=!0,ymaps.ready(function(){let e=new ymaps.Map("yandex-map",{center:[47.244734,39.723227],zoom:17,controls:["zoomControl"]});e.behaviors.disable(["scrollZoom"]);let a=new ymaps.Placemark([47.244734,39.723227],{},{});e.geoObjects.add(a)})}}});